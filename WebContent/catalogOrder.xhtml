<!DOCTYPE html>

<html xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">


<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"></link>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css"></link>

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>


<h:head>
	<title>Catalog</title>
</h:head>
<h:body>
	<f:view>
		<h2>Products:</h2>
			<ui:repeat var="product" value="${orderController.allProduct()}">
			<div class="col-md-7">
				<div class="panel-group" id="accordion" role="tablist"
					aria-multiselectable="true">
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="headingOne">
							<h4 class="panel-title">
								<a role="button" data-toggle="collapse" data-parent="#accordion"
									href="#${product.id}" aria-expanded="true"
									aria-controls="${product.id}"> ${product.name} </a>
							</h4>
						</div>
						<div id="${product.id}" class="panel-collapse collapse"
							role="tabpanel" aria-labelledby="headingOne">
							<div class="panel-body">
								<div>Code: ${product.code} </div>
								<div>Price: ${product.price} </div>
								<div>Description: ${product.description} </div>
								<h:form>
								<h:inputText value="#{orderController.quantity}" required="true"
									requiredMessage="This field is mandatory" id="quantity" />
								<h:message for="quantity" />
								<h:commandButton action="#{orderController.addProduct}"
									value="Add to Order" class="btn btn-success">
									<f:param name="idProduct" value="#{product.id}" />
								</h:commandButton>
								</h:form>
							</div>
						</div>
					</div>
				</div>
				</div>
			</ui:repeat>
			<h:form>
			<h:commandButton value="CompleteOrder"
				action="#{orderController.completeOrder}" class="btn btn-success">
			</h:commandButton>
		</h:form>
		<div>
			<h:outputLink value="customerPage.xhtml">Torna alla Home</h:outputLink>
		</div>

	</f:view>
</h:body>
</html>
